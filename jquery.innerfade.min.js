(function(a){var k={animationType:"fade",animate:!0,first_slide:0,easing:"linear",speed:"normal",type:"sequence",timeout:2E3,startDelay:0,loop:!0,containerHeight:"auto",runningClass:"innerFade",children:null,cancelLink:null,pauseLink:null,prevLink:null,nextLink:null,indexContainer:null,currentItemContainer:null,totalItemsContainer:null,callback_index_update:null};a(function(){window.isActive=!0;a(window).focus(function(){this.isActive=!0});a(window).blur(function(){this.isActive=!1})});a.fn.innerFade=
function(b){return this.each(function(){$fade_object={container:this};$fade_object.settings=a.extend({},k,b);$fade_object.elements=$fade_object.settings.children===null?a($fade_object.container).children():a($fade_object.container).children($fade_object.settings.children);$fade_object.count=0;a($fade_object.container).data("object",$fade_object);if($fade_object.elements.length>1){a.bindControls($fade_object);$fade_object.settings.cancelLink&&a.bindCancel($fade_object);a($fade_object.container).css({position:"relative"}).addClass($fade_object.settings.runningClass);
$fade_object.settings.containerHeight=="auto"?(height=a($fade_object.elements).filter(":first").height(),a($fade_object.container).css({height:height+"px"})):a($fade_object.container).css({height:$fade_object.settings.containerHeight});$fade_object.settings.indexContainer&&a.innerFadeIndex($fade_object);a($fade_object.elements).filter(":gt(0)").hide(0);for(var c=0;c<$fade_object.elements.length;c++)a($fade_object.elements[c]).css("z-index",String($fade_object.elements.length-c)).css("position","absolute");
var d=c="";if($fade_object.settings.type=="random"){d=Math.floor(Math.random()*$fade_object.elements.length);do c=Math.floor(Math.random()*$fade_object.elements.length);while(d==c);a($fade_object.elements[d]).show()}else $fade_object.settings.type=="random_start"?($fade_object.settings.type="sequence",d=Math.floor(Math.random()*$fade_object.elements.length),c=(d+1)%$fade_object.elements.length):(c=$fade_object.settings.first_slide,d=$fade_object.settings.first_slide==0?$fade_object.elements.length-
1:$fade_object.settings.first_slide-1);$fade_object.settings.animate?a.fadeTimeout($fade_object,c,d,!0):(a($fade_object.elements[c]).show(),a($fade_object.elements[d]).hide(),a.updateIndexes($fade_object,c));a.updateIndexes($fade_object,c);$fade_object.settings.type=="random"?a($fade_object.elements[d]).show():a($fade_object.elements[c]).show();$fade_object.settings.currentItemContainer&&a.currentItem($fade_object,c);$fade_object.settings.totalItemsContainer&&a.totalItems($fade_object);$fade_object.settings.pauseLink&&
a.bind_pause($fade_object)}})};a.fn.innerFadeTo=function(b){return this.each(function(){var c=a(this).data("object"),d=a(c.elements).filter(":visible"),d=a(c.elements).index(d);a.stopSlideshow(c);b!=d&&a.fadeToItem(c,b,d)})};a.fadeToItem=function(b,c,d){var e=function(){(b.settings.nextLink||b.settings.prevLink)&&a.bindControls(b)};if(b.settings.animationType=="slide")a(b.elements[d]).slideUp(b.settings.speed),a(b.elements[c]).slideDown(b.settings.speed,function(){e()});else if(b.settings.animationType==
"slideOver"){var f=a(b.elements[0]).width(),g={},h={},i={},j={};a(b.container).css({overflow:"hidden"});g={position:"absolute",top:"0px"};h=a.extend({},g);c>d?(console.log("Forwards!"),g.left="0px",g.right="auto",h.left="auto",h.right="-"+f+"px",i.left="-"+f+"px",j.right="0px",console.log(g)):(console.log("Backwards!"),g.left="auto",g.right="0px",h.left="-"+f+"px",h.right="auto",i.right="-"+f+"px",j.left="0px");a(b.elements[d]).css(g);a(b.elements[c]).css(h).show();a(b.elements[d]).animate(i,b.settings.speed,
b.settings.easing,function(){a(this).hide()});a(b.elements[c]).animate(j,b.settings.speed,b.settings.easing,function(){e()})}else a(b.elements[d]).fadeOut(b.settings.speed),a(b.elements[c]).fadeIn(b.settings.speed,function(){e()});b.settings.currentItemContainer&&a.currentItem(b,c);(b.settings.indexContainer||b.settings.callback_index_update)&&a.updateIndexes(b,c)};a.fadeTimeout=function(b,c,d,e){if(window.isActive){e!=!0&&a.fadeToItem(b,c,d);b.count++;if(b.settings.loop==!1&&b.count>=b.elements.length){a.stopSlideshow(b);
return}if(b.settings.type=="random")for(d=c;c==d;)c=Math.floor(Math.random()*b.elements.length);else d=d>c?0:c,c=c+1>=b.elements.length?0:c+1}e=e&&b.settings.startDelay?b.settings.startDelay:b.settings.timeout;a(b.container).data("current_timeout",setTimeout(function(){a.fadeTimeout(b,c,d,!1)},e))};a.fn.innerFadeUnbind=function(){return this.each(function(){var b=a(this).data("object");a.stopSlideshow(b)})};a.stopSlideshow=function(b){clearTimeout(a(b.container).data("current_timeout"));a(b.container).data("current_timeout",
null)};a.bindControls=function(b){a(b.settings.nextLink).unbind().one("click",function(c){c.preventDefault();a.stopSlideshow(b);var d=a(b.elements).filter(":visible"),c=a(b.elements).index(d),d=d.next().length>0?d.next():a(b.elements).filter(":first"),d=a(b.elements).index(d);a.fadeToItem(b,d,c)});a(b.settings.prevLink).unbind().one("click",function(c){c.preventDefault();a.stopSlideshow(b);var d=a(b.elements).filter(":visible"),c=a(b.elements).index(d),d=d.prev().length>0?d.prev():a(b.elements).filter(":last"),
d=a(b.elements).index(d);a.fadeToItem(b,d,c)})};a.bind_pause=function(b){a(b.settings.pauseLink).unbind().click(function(c){c.preventDefault();if(a(b.container).data("current_timeout")!=null)a.stopSlideshow(b);else{var c=a(b.container).children(":first").attr("tagName").toLowerCase(),d="",e="";if(b.settings.type=="random"){e=Math.floor(Math.random()*b.elements.length);do d=Math.floor(Math.random()*b.elements.length);while(e==d)}else b.settings.type=="random_start"?(e=Math.floor(Math.random()*b.elements.length),
d=(e+1)%b.elements.length):(e=a(c,a(b.container)).index(a(c+":visible",a(b.container))),d=e+1==b.elements.length?0:e+1);a.fadeTimeout(b,d,e,!1)}})};a.bindCancel=function(b){a(b.settings.cancelLink).unbind().click(function(c){c.preventDefault();a.stopSlideshow(b)})};a.updateIndexes=function(b,c){a(b.settings.indexContainer).children().removeClass("active");a("> :eq("+c+")",a(b.settings.indexContainer)).addClass("active");typeof b.settings.callback_index_update=="function"&&b.settings.callback_index_update.call(this,
c)};a.createIndexHandler=function(b,c,d){a(d).click(function(d){d.preventDefault();var d=a(b.elements).filter(":visible"),f=a(b.elements).index(d);a.stopSlideshow(b);d.size()<=1&&c!=f&&a.fadeToItem(b,c,f)})};a.createIndexes=function(b){for(var c=a(b.settings.indexContainer),d=0;d<b.elements.length;d++){var e=a('<li><a href="#">'+(d+1)+"</a></li>");a.createIndexHandler(b,d,e);c.append(e)}};a.linkIndexes=function(b){var c=a(b.settings.indexContainer),d=a("> :visible",c);if(d.size()==b.elements.length)for(var e=
b.elements.length,f=0;f<e;f++)a("a",c).click(function(a){a.preventDefault()}),a.createIndexHandler(b,f,d[f]);else alert("There is a different number of items in the menu and slides. There needs to be the same number in both.\nThere are "+d.size()+" in the indexContainer.\nThere are "+b.elements.length+" in the slides container.")};a.innerFadeIndex=function(b){var c=a(b.settings.indexContainer);a(":visible",c).size()<=0?a.createIndexes(b):a.linkIndexes(b)};a.currentItem=function(b,c){a(b.settings.currentItemContainer).text(c+
1)};a.totalItems=function(b){a(b.settings.totalItemsContainer).text(b.elements.length)}})(jQuery);
